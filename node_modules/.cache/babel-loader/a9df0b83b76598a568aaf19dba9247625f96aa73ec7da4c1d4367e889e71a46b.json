{"ast":null,"code":"import _slicedToArray from\"/Users/pablogl/Documents/Dev/bite-choice/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _objectSpread from\"/Users/pablogl/Documents/Dev/bite-choice/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/Users/pablogl/Documents/Dev/bite-choice/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/pablogl/Documents/Dev/bite-choice/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React,{useReducer,createContext}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";var initialState={customView:{resultsMode:false,searchTerms:[],sortBy:'Best Match'},data:[],ui:'landing',inputLocation:''};var randomSorting=function randomSorting(){var criteria=['best_match','rating','review_count'];return criteria[Math.floor(Math.random()*4)];};var searchTerm=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(term,sort_by,newLocation){var response,businesses;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"/search/\".concat(term,\"/\").concat(sort_by,\"/\").concat(newLocation));case 2:response=_context.sent;_context.next=5;return response.json();case 5:businesses=_context.sent;return _context.abrupt(\"return\",businesses.businesses);case 7:case\"end\":return _context.stop();}},_callee);}));return function searchTerm(_x,_x2,_x3){return _ref.apply(this,arguments);};}();var fetchData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(searchInputs){var sortBy,searchTerms,location,sorting,data,termOne,termTwo,termThree,result,dataOne,dataTwo,dataThree;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:sortBy=searchInputs.sortBy,searchTerms=searchInputs.searchTerms,location=searchInputs.location;sorting=sortBy==='random'?randomSorting():sortBy;if(!(searchTerms.length===0)){_context2.next=9;break;}_context2.next=5;return searchTerm(null,sorting,location);case 5:data=_context2.sent;return _context2.abrupt(\"return\",data);case 9:termOne=searchTerms[0]!==undefined?searchTerms[0]:null;termTwo=searchTerms[1]!==undefined?searchTerms[1]:null;termThree=searchTerms[2]!==undefined?searchTerms[2]:null;result=[];dataOne=[];dataTwo=[];dataThree=[];if(!(termOne!==null)){_context2.next=20;break;}_context2.next=19;return searchTerm(termOne,sorting,location);case 19:dataOne=_context2.sent;case 20:;if(!(termTwo!==null)){_context2.next=25;break;}_context2.next=24;return searchTerm(termTwo,sorting,location);case 24:dataTwo=_context2.sent;case 25:;if(!(termThree!==null)){_context2.next=30;break;}_context2.next=29;return searchTerm(termThree,sorting,location);case 29:dataThree=_context2.sent;case 30:;// ERROR CATCHER WRONG DATA\nif(!(dataOne===undefined)){_context2.next=33;break;}return _context2.abrupt(\"return\",[undefined]);case 33:if(dataOne.length!==0){result.push(dataOne);};if(dataTwo.length!==0){result.push(dataTwo);};if(dataThree.length!==0){result.push(dataThree);};return _context2.abrupt(\"return\",result);case 40:case\"end\":return _context2.stop();}},_callee2);}));return function fetchData(_x4){return _ref2.apply(this,arguments);};}();var fetchRandomData=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(location){var response,businesses;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.next=2;return fetch(\"/getRandom/\".concat(location));case 2:response=_context3.sent;if(!(response.status===500)){_context3.next=5;break;}return _context3.abrupt(\"return\",500);case 5:_context3.next=7;return response.json();case 7:businesses=_context3.sent;return _context3.abrupt(\"return\",businesses.businesses);case 9:case\"end\":return _context3.stop();}},_callee3);}));return function fetchRandomData(_x5){return _ref3.apply(this,arguments);};}();function reducer(state,action){var customViewCopy=_objectSpread({},state.customView);switch(action.type){case'TOGGLE_CUSTOM_FORM':customViewCopy.resultsMode=!customViewCopy.resultsMode;return _objectSpread(_objectSpread({},state),{},{customView:customViewCopy});case'SUBMIT_SEARCH':customViewCopy={searchTerms:action.payload.searchTerms,sortBy:action.payload.sortBy,resultsMode:true};return _objectSpread(_objectSpread({},state),{},{customView:customViewCopy,data:fetchData(action.payload)});case'FETCH_RANDOM_DATA':return _objectSpread(_objectSpread({},state),{},{data:fetchRandomData(action.payload)});case'TOGGLE_UI':customViewCopy={sortBy:'Best Match',resultsMode:false,searchTerms:[]};return _objectSpread(_objectSpread({},state),{},{customView:customViewCopy,data:[],ui:action.payload});case'UPDATE_LOCATION':return _objectSpread(_objectSpread({},state),{},{inputLocation:action.payload});case'CLEAR_LOCATION':return _objectSpread(_objectSpread({},state),{},{inputLocation:''});default:return state;}};export function StoreProvider(props){var _useReducer=useReducer(reducer,initialState),_useReducer2=_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];var value={state:state,dispatch:dispatch};return/*#__PURE__*/_jsx(Store.Provider,{value:value,children:props.children});}export var Store=/*#__PURE__*/createContext();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}